//groups = [' Engineering', '  Computer Engineering  ', '  Civil Engineering  ', '  Mechanical Engineering  ', '  Electronics Engineering  ', '  Electrical Engineering  ', '  Doctors  ', '  Obstetrics  ', '  Gynaecology  ', '  Dentistry  ', '  Internal Medicines  ', '  Paediatrics  ', '  General Medicine (MBBS)  ', '  Sports  ', '  Basketball  ', '  Cricket  ', '  Hockey  ', '  Table Tennis  ', '  Badminton  ', '  Artists  ', '  Photography  ', '  Music  ', '  Painting  ', '  Dancing  ', '  Theatre and Film  ', '  Writing  ', '  Hip Hop  ', '  Salsa Dancing  ', '  Zumba  ', '  Classical  ', '  Activism  ', '  Social Activism  ', '  Political Activism  ', '  Animal Welfare  ', '  Environment Activism  ', '  Lawn Tennis  ', '  Fitness  ', '  Gym  ', '  Running  ', '  Cycling  ', '  Yoga  ', '  Wrestling  ', '  Kizomba  ', '  Food and Nutrition  ', '  Bollywood  ', '  Belly  ', '  Football  ', '  Golf  ', '  Skating  ', '  Blockchain & Cryptocurrency  ', '  Travelling  ', '  Lawyer  ', '  Leisure  ', '  Trekking & Hiking  ', '  Business  ', '  Startup  ', '  Code Development  ', '  QA & testing  ', '  DevOps  ', '  Python  ', '  Wordpress  ', '  Designing  ', '  Parenting  ', '  UI Designing  ', '  Graphic Designing  ', '  Meditation  ', '  Self Healing  ', '  Computer Networking  ', '  Party  ', '  Cyber Security  ', '  Dermatology  ', '  Neurology  ', '  Ophthalmology  ', '  Psychiatry  ', '  Toxicology  ', '  Baseball  ', '  Volleyball  ', '  Rugby  ', '  Boxing  ', '  Motorsports  ', '  Cardiology  ', '  Orthopaedic  ', '  Endocrinology  ', '  Oncology  ', '  Anesthesia  ', '  Gardening  ', '  Infertility  ', '  Immigration  ', '  Makeup Artist  ', '  MBA  ', '  Human Resource  ', '  Finance  ', '  Marketing  ', '  Leadership  ', '  Financial Planning  ', '  Management  ', '  Accounts  ', '  Physics  ', '  Chemistry  ', '  Economics  ', '  Literature  ', '  Chartered Accountant  ', '  Language Learning  ', '  English Learning  ', '  Spanish Learning  ', '  Beer  ', '  Marijuana  ', '  Real Estate  ', '  Emerging Technologies  ', '  Data Analytics  ', '  Mental Peace  ', '  Sketching  ', '  Russian Language  ', '  German Language  ', '  Business Strategy  ', '  Wine  ', '  Linux  ', '  Business Networking  ', '  Artificial Intelligence  ', '  Game Developing  ', '  Internet Of Things  ', '  Aeronautical Engineering  ', '  Chemical Engineering  ', '  Fashion  ', '  Flight Attendant  ', '  Pilot  ', '  Robotic Engineering  ', '  Poetry  ', '  Philosophy  ', '  Architecture  ', '  Rowing  ', '  Virtual Reality  ', '  Biochemistry  ', '  Religion  ', '  Spirituality  ', '  Agriculture  ', '  Book Reading  ', '  History  ', '  Space  ', '  Pharmacy  ', '  Education  ', '  Entrance Exam  ', '  Musical Instrument  ', '  Lifestyle  ', '  Maths  ', '  French Language  ', '  Student  ', '  Chess  ', '  Guitar  ', '  Tabla  ', '  Piano  ', '  Violin  ', '  Flute  ', '  Drum  ', '  Saxophone  ', '  Cello  ', '  Keyboard  ', '  Harmonium  ', '  Mythology  ', '  Market Analysis  ', '  LGBT  ', '  Class 11  ', '  Class 10  ', '  Class 12  ', '  Teacher  ', '  Festival  ', '  Beauty  ', '  IIT JEE  ', '  Archaeology  ', '  Civilisation  ', '  Astronomy  ', '  Cooking  ', '  Trading  ', '  Movie Watching  ', '  Archery  ', '  Bowling    ', '  Karate  ', '  Weight Lifting  ', '  Shooting  ', '  Ballet  ', '  Kathak   ', '  Magic  ', '  Horse Riding  ', '  Self Defence  ', '  Swimming  '];
// import {data} from './includes/group.js';
var data = {
    // "Engineering": [
    //     "JOIN THE SOCIAL NETWORK FOR ENGINEERING\n https://ATG.world/go/Engineering .",
    //     "https://www.atg.world/view-article/ENGINEERING%20LIFE-27359"
    // ],
    // "Computer Engineering": [
    //     "JOIN THE SOCIAL NETWORK FOR COMPUTER ENGINEERING\n https://ATG.world/go/Computer%20Engineering ."
    // ],
    // "Civil Engineering": [
    //     "JOIN THE SOCIAL NETWORK FOR CIVIL ENGINEERING\n https://ATG.world/go/Civil%20Engineering ."
    // ],
    // "Mechanical Engineering": [
    //     "JOIN THE SOCIAL NETWORK FOR MECHANICAL ENGINEERING\n https://ATG.world/go/Mechanical%20Engineering ."
    // ],
    // "Electronics Engineering": [
    //     "JOIN THE SOCIAL NETWORK FOR ELECTRONICS ENGINEERING\n https://ATG.world/go/Electronics%20Engineering ."
    // ],
   
    // "Electrical Engineering": [
    //     "JOIN THE SOCIAL NETWORK FOR ELECTRICAL ENGINEERING\n https://ATG.world/go/Electrical%20Engineering ."
    // ],
    // "Doctors": [
    //     "JOIN THE SOCIAL NETWORK FOR DOCTORS\n https://ATG.world/go/Doctors ."
    // ],
    // "Obstetrics": [
    //     "JOIN THE SOCIAL NETWORK FOR OBSTETRICS\n https://ATG.world/go/Obstetrics ."
    // ],
    // "Gynaecology": [
    //     "JOIN THE SOCIAL NETWORK FOR GYNAECOLOGY\n https://ATG.world/go/Gynaecology ."
    // ],
    // "Dentistry": [
    //     "JOIN THE SOCIAL NETWORK FOR DENTISTRY\n https://ATG.world/go/Dentistry ."
    // ],

    // "Internal Medicines": [
    //     "JOIN THE SOCIAL NETWORK FOR INTERNAL MEDICINES\n https://ATG.world/go/Internal%20Medicines ."
    // ],
    // "Paediatrics": [
    //     "JOIN THE SOCIAL NETWORK FOR PAEDIATRICS\n https://ATG.world/go/Paediatrics ."
    // ],
    // "General Medicine (MBBS)": [
    //     "JOIN THE SOCIAL NETWORK FOR GENERAL MEDICINE (MBBS)\n https://ATG.world/go/General%20Medicine%20(MBBS) ."
    // ],
    // "Sports": [
    //     "JOIN THE SOCIAL NETWORK FOR SPORTS\n https://ATG.world/go/Sports ."
    // ],
    // "Basketball": [
    //     "JOIN THE SOCIAL NETWORK FOR BASKETBALL\n https://ATG.world/go/Basketball ."
    // ],
    // "Cricket": [
    //     "JOIN THE SOCIAL NETWORK FOR CRICKET\n https://ATG.world/go/Cricket ."
    // ],
    // "Hockey": [
    //     "JOIN THE SOCIAL NETWORK FOR HOCKEY\n https://ATG.world/go/Hockey ."
    // ],
    // "Table Tennis": [
    //     "JOIN THE SOCIAL NETWORK FOR TABLE TENNIS\n https://ATG.world/go/Table%20Tennis ."
    // ],
    // "Badminton": [
    //     "JOIN THE SOCIAL NETWORK FOR BADMINTON\n https://ATG.world/go/Badminton ."
    // ],
    // "Artists": [
    //     "JOIN THE SOCIAL NETWORK FOR ARTISTS\n https://ATG.world/go/Artists ."
    // ],
    // "Photography": [
    //     "JOIN THE SOCIAL NETWORK FOR PHOTOGRAPHY\n https://ATG.world/go/Photography ."
    // ],
    // "Music": [
    //     "JOIN THE SOCIAL NETWORK FOR MUSIC\n https://ATG.world/go/Music ."
    // ],
    // "Painting": [
    //     "JOIN THE SOCIAL NETWORK FOR PAINTING\n https://ATG.world/go/Painting ."
    // ],
    // "Dancing": [
    //     "JOIN THE SOCIAL NETWORK FOR DANCING\n https://ATG.world/go/Dancing ."
    // ],
    // "Theatre and Film": [
    //     "JOIN THE SOCIAL NETWORK FOR THEATRE AND FILM\n https://ATG.world/go/Theatre%20and%20Film ."
    // ],
    // "Writing": [
    //     "JOIN THE SOCIAL NETWORK FOR WRITING\n https://ATG.world/go/Writing ."
    // ],
    // "Hip Hop": [
    //     "JOIN THE SOCIAL NETWORK FOR HIP HOP\n https://ATG.world/go/Hip%20Hop ."
    // ],
    // "Salsa Dancing": [
    //     "JOIN THE SOCIAL NETWORK FOR SALSA DANCING\n https://ATG.world/go/Salsa%20Dancing ."
    // ],
    "Zumba": [
        "JOIN THE SOCIAL NETWORK FOR ZUMBA\n https://ATG.world/go/Zumba ."
    ],
    // "Classical": [
    //     "JOIN THE SOCIAL NETWORK FOR CLASSICAL\n https://ATG.world/go/Classical ."
    // ],
    // "Activism": [
    //     "JOIN THE SOCIAL NETWORK FOR ACTIVISM\n https://ATG.world/go/Activism ."
    // ],
    // "Social Activism": [
    //     "JOIN THE SOCIAL NETWORK FOR SOCIAL ACTIVISM\n https://ATG.world/go/Social%20Activism ."
    // ],
    // "Political Activism": [
    //     "JOIN THE SOCIAL NETWORK FOR POLITICAL ACTIVISM\n https://ATG.world/go/Political%20Activism ."
    // ],
    // "Animal Welfare": [
    //     "JOIN THE SOCIAL NETWORK FOR ANIMAL WELFARE\n https://ATG.world/go/Animal%20Welfare ."
    // ],
    // "Environment Activism": [
    //     "JOIN THE SOCIAL NETWORK FOR ENVIRONMENT ACTIVISM\n https://ATG.world/go/Environment%20Activism ."
    // ],
    // "Lawn Tennis": [
    //     "JOIN THE SOCIAL NETWORK FOR LAWN TENNIS\n https://ATG.world/go/Lawn%20Tennis ."
    // ],
    // "Fitness": [
    //     "JOIN THE SOCIAL NETWORK FOR FITNESS\n https://ATG.world/go/Fitness ."
    // ],
    // "Gym": [
    //     "JOIN THE SOCIAL NETWORK FOR GYM\n https://ATG.world/go/Gym ."
    // ],
    // "Running": [
    //     "JOIN THE SOCIAL NETWORK FOR RUNNING\n https://ATG.world/go/Running ."
    // ],
    // "Cycling": [
    //     "JOIN THE SOCIAL NETWORK FOR CYCLING\n https://ATG.world/go/Cycling ."
    // ],
    // "Yoga": [
    //     "JOIN THE SOCIAL NETWORK FOR YOGA\n https://ATG.world/go/Yoga ."
    // ],
    // "Wrestling": [
    //     "JOIN THE SOCIAL NETWORK FOR WRESTLING\n https://ATG.world/go/Wrestling ."
    // ],
    // "Kizomba": [
    //     "JOIN THE SOCIAL NETWORK FOR KIZOMBA\n https://ATG.world/go/Kizomba ."
    // ],
    // "Food and Nutrition": [
    //     "JOIN THE SOCIAL NETWORK FOR FOOD AND NUTRITION\n https://ATG.world/go/Food%20and%20Nutrition ."
    // ],
    // "Bollywood": [
    //     "JOIN THE SOCIAL NETWORK FOR BOLLYWOOD\n https://ATG.world/go/Bollywood ."
    // ],
    // "Belly": [
    //     "JOIN THE SOCIAL NETWORK FOR BELLY\n https://ATG.world/go/Belly ."
    // ],
    // "Football": [
    //     "JOIN THE SOCIAL NETWORK FOR FOOTBALL\n https://ATG.world/go/Football ."
    // ],
    // "Golf": [
    //     "JOIN THE SOCIAL NETWORK FOR GOLF\n https://ATG.world/go/Golf ."
    // ],
    // "Skating": [
    //     "JOIN THE SOCIAL NETWORK FOR SKATING\n https://ATG.world/go/Skating ."
    // ],
    // "Blockchain & Cryptocurrency": [
    //     "JOIN THE SOCIAL NETWORK FOR BLOCKCHAIN & CRYPTOCURRENCY\n https://ATG.world/go/Blockchain%20&%20Cryptocurrency ."
    // ],
    // "Travelling": [
    //     "JOIN THE SOCIAL NETWORK FOR TRAVELLING\n https://ATG.world/go/Travelling ."
    // ],
    // "Lawyer": [
    //     "JOIN THE SOCIAL NETWORK FOR LAWYER\n https://ATG.world/go/Lawyer ."
    // ],
    // "Leisure": [
    //     "JOIN THE SOCIAL NETWORK FOR LEISURE\n https://ATG.world/go/Leisure ."
    // ],
    // "Trekking & Hiking": [
    //     "JOIN THE SOCIAL NETWORK FOR TREKKING & HIKING\n https://ATG.world/go/Trekking%20&%20Hiking ."
    // ],
    // "Business": [
    //     "JOIN THE SOCIAL NETWORK FOR BUSINESS\n https://ATG.world/go/Business ."
    // ],
    // "Startup": [
    //     "JOIN THE SOCIAL NETWORK FOR STARTUP\n https://ATG.world/go/Startup ."
    // ],
    // "Code Development": [
    //     "JOIN THE SOCIAL NETWORK FOR CODE DEVELOPMENT\n https://ATG.world/go/Code%20Development ."
    // ],
    // "QA & testing": [
    //     "JOIN THE SOCIAL NETWORK FOR QA & TESTING\n https://ATG.world/go/QA%20&%20testing ."
    // ],
    // "DevOps": [
    //     "JOIN THE SOCIAL NETWORK FOR DEVOPS\n https://ATG.world/go/DevOps ."
    // ],
    // "Python": [
    //     "JOIN THE SOCIAL NETWORK FOR PYTHON\n https://ATG.world/go/Python ."
    // ],
    // "Wordpress": [
    //     "JOIN THE SOCIAL NETWORK FOR WORDPRESS\n https://ATG.world/go/Wordpress ."
    // ],
    // "Designing": [
    //     "JOIN THE SOCIAL NETWORK FOR DESIGNING\n https://ATG.world/go/Designing ."
    // ],
    // "Parenting": [
    //     "JOIN THE SOCIAL NETWORK FOR PARENTING\n https://ATG.world/go/Parenting ."
    // ],
    // "UI Designing": [
    //     "JOIN THE SOCIAL NETWORK FOR UI DESIGNING\n https://ATG.world/go/UI%20Designing ."
    // ],
    // "Graphic Designing": [
    //     "JOIN THE SOCIAL NETWORK FOR GRAPHIC DESIGNING\n https://ATG.world/go/Graphic%20Designing ."
    // ],
    // "Meditation": [
    //     "JOIN THE SOCIAL NETWORK FOR MEDITATION\n https://ATG.world/go/Meditation ."
    // ],
    // "Self Healing": [
    //     "JOIN THE SOCIAL NETWORK FOR SELF HEALING\n https://ATG.world/go/Self%20Healing ."
    // ],
    // "Computer Networking": [
    //     "JOIN THE SOCIAL NETWORK FOR COMPUTER NETWORKING\n https://ATG.world/go/Computer%20Networking ."
    // ],
    // "Party": [
    //     "JOIN THE SOCIAL NETWORK FOR PARTY\n https://ATG.world/go/Party ."
    // ],
    // "Cyber Security": [
    //     "JOIN THE SOCIAL NETWORK FOR CYBER SECURITY\n https://ATG.world/go/Cyber%20Security ."
    // ],
    // "Dermatology": [
    //     "JOIN THE SOCIAL NETWORK FOR DERMATOLOGY\n https://ATG.world/go/Dermatology ."
    // ],
    // "Neurology": [
    //     "JOIN THE SOCIAL NETWORK FOR NEUROLOGY\n https://ATG.world/go/Neurology ."
    // ],
    // "Ophthalmology": [
    //     "JOIN THE SOCIAL NETWORK FOR OPHTHALMOLOGY\n https://ATG.world/go/Ophthalmology ."
    // ],
    // "Psychiatry": [
    //     "JOIN THE SOCIAL NETWORK FOR PSYCHIATRY\n https://ATG.world/go/Psychiatry ."
    // ],
    // "Toxicology": [
    //     "JOIN THE SOCIAL NETWORK FOR TOXICOLOGY\n https://ATG.world/go/Toxicology ."
    // ],
    // "Baseball": [
    //     "JOIN THE SOCIAL NETWORK FOR BASEBALL\n https://ATG.world/go/Baseball ."
    // ],
    // "Volleyball": [
    //     "JOIN THE SOCIAL NETWORK FOR VOLLEYBALL\n https://ATG.world/go/Volleyball ."
    // ],
    // "Rugby": [
    //     "JOIN THE SOCIAL NETWORK FOR RUGBY\n https://ATG.world/go/Rugby ."
    // ],
    // "Boxing": [
    //     "JOIN THE SOCIAL NETWORK FOR BOXING\n https://ATG.world/go/Boxing ."
    // ],
    // "Motorsports": [
    //     "JOIN THE SOCIAL NETWORK FOR MOTORSPORTS\n https://ATG.world/go/Motorsports ."
    // ],
    // "Cardiology": [
    //     "JOIN THE SOCIAL NETWORK FOR CARDIOLOGY\n https://ATG.world/go/Cardiology ."
    // ],
    // "Orthopaedic": [
    //     "JOIN THE SOCIAL NETWORK FOR ORTHOPAEDIC\n https://ATG.world/go/Orthopaedic ."
    // ],
    // "Endocrinology": [
    //     "JOIN THE SOCIAL NETWORK FOR ENDOCRINOLOGY\n https://ATG.world/go/Endocrinology ."
    // ],
    // "Oncology": [
    //     "JOIN THE SOCIAL NETWORK FOR ONCOLOGY\n https://ATG.world/go/Oncology ."
    // ],
    // "Anesthesia": [
    //     "JOIN THE SOCIAL NETWORK FOR ANESTHESIA\n https://ATG.world/go/Anesthesia ."
    // ],
    // "Gardening": [
    //     "JOIN THE SOCIAL NETWORK FOR GARDENING\n https://ATG.world/go/Gardening ."
    // ],
    // "Infertility": [
    //     "JOIN THE SOCIAL NETWORK FOR INFERTILITY\n https://ATG.world/go/Infertility ."
    // ],
    // "Immigration": [
    //     "JOIN THE SOCIAL NETWORK FOR IMMIGRATION\n https://ATG.world/go/Immigration ."
    // ],
    // "Makeup Artist": [
    //     "JOIN THE SOCIAL NETWORK FOR MAKEUP ARTIST\n https://ATG.world/go/Makeup%20Artist ."
    // ],
    // "MBA": [
    //     "JOIN THE SOCIAL NETWORK FOR MBA\n https://ATG.world/go/MBA ."
    // ],
    // "Human Resource": [
    //     "JOIN THE SOCIAL NETWORK FOR HUMAN RESOURCE\n https://ATG.world/go/Human%20Resource ."
    // ],
    // "Finance": [
    //     "JOIN THE SOCIAL NETWORK FOR FINANCE\n https://ATG.world/go/Finance ."
    // ],
    // "Marketing": [
    //     "JOIN THE SOCIAL NETWORK FOR MARKETING\n https://ATG.world/go/Marketing ."
    // ],
    // "Leadership": [
    //     "JOIN THE SOCIAL NETWORK FOR LEADERSHIP\n https://ATG.world/go/Leadership ."
    // ],
    // "Financial Planning": [
    //     "JOIN THE SOCIAL NETWORK FOR FINANCIAL PLANNING\n https://ATG.world/go/Financial%20Planning ."
    // ],
    // "Management": [
    //     "JOIN THE SOCIAL NETWORK FOR MANAGEMENT\n https://ATG.world/go/Management ."
    // ],
    // "Accounts": [
    //     "JOIN THE SOCIAL NETWORK FOR ACCOUNTS\n https://ATG.world/go/Accounts ."
    // ],
    // "Physics": [
    //     "JOIN THE SOCIAL NETWORK FOR PHYSICS\n https://ATG.world/go/Physics ."
    // ],
    // "Chemistry": [
    //     "JOIN THE SOCIAL NETWORK FOR CHEMISTRY\n https://ATG.world/go/Chemistry ."
    // ],
    // "Economics": [
    //     "JOIN THE SOCIAL NETWORK FOR ECONOMICS\n https://ATG.world/go/Economics ."
    // ],
    // "Literature": [
    //     "JOIN THE SOCIAL NETWORK FOR LITERATURE\n https://ATG.world/go/Literature ."
    // ],
    // "Chartered Accountant": [
    //     "JOIN THE SOCIAL NETWORK FOR CHARTERED ACCOUNTANT\n https://ATG.world/go/Chartered%20Accountant ."
    // ],
    // "Language Learning": [
    //     "JOIN THE SOCIAL NETWORK FOR LANGUAGE LEARNING\n https://ATG.world/go/Language%20Learning ."
    // ],
    // "English Learning": [
    //     "JOIN THE SOCIAL NETWORK FOR ENGLISH LEARNING\n https://ATG.world/go/English%20Learning ."
    // ],
    // "Spanish Learning": [
    //     "JOIN THE SOCIAL NETWORK FOR SPANISH LEARNING\n https://ATG.world/go/Spanish%20Learning ."
    // ],
    // "Beer": [
    //     "JOIN THE SOCIAL NETWORK FOR BEER\n https://ATG.world/go/Beer ."
    // ],
    // "Marijuana": [
    //     "JOIN THE SOCIAL NETWORK FOR MARIJUANA\n https://ATG.world/go/Marijuana ."
    // ],
    // "Real Estate": [
    //     "JOIN THE SOCIAL NETWORK FOR REAL ESTATE\n https://ATG.world/go/Real%20Estate ."
    // ],
    // "Emerging Technologies": [
    //     "JOIN THE SOCIAL NETWORK FOR EMERGING TECHNOLOGIES\n https://ATG.world/go/Emerging%20Technologies ."
    // ],
    // "Data Analytics": [
    //     "JOIN THE SOCIAL NETWORK FOR DATA ANALYTICS\n https://ATG.world/go/Data%20Analytics ."
    // ],
    // "Mental Peace": [
    //     "JOIN THE SOCIAL NETWORK FOR MENTAL PEACE\n https://ATG.world/go/Mental%20Peace ."
    // ],
    // "Sketching": [
    //     "JOIN THE SOCIAL NETWORK FOR SKETCHING\n https://ATG.world/go/Sketching ."
    // ],
    // "Russian Language": [
    //     "JOIN THE SOCIAL NETWORK FOR RUSSIAN LANGUAGE\n https://ATG.world/go/Russian%20Language ."
    // ],
    // "German Language": [
    //     "JOIN THE SOCIAL NETWORK FOR GERMAN LANGUAGE\n https://ATG.world/go/German%20Language ."
    // ],
    // "Business Strategy": [
    //     "JOIN THE SOCIAL NETWORK FOR BUSINESS STRATEGY\n https://ATG.world/go/Business%20Strategy ."
    // ],
    // "Wine": [
    //     "JOIN THE SOCIAL NETWORK FOR WINE\n https://ATG.world/go/Wine ."
    // ],
    // "Linux": [
    //     "JOIN THE SOCIAL NETWORK FOR LINUX\n https://ATG.world/go/Linux ."
    // ],
    // "Business Networking": [
    //     "JOIN THE SOCIAL NETWORK FOR BUSINESS NETWORKING\n https://ATG.world/go/Business%20Networking ."
    // ],
    // "Artificial Intelligence": [
    //     "JOIN THE SOCIAL NETWORK FOR ARTIFICIAL INTELLIGENCE\n https://ATG.world/go/Artificial%20Intelligence ."
    // ],
    // "Game Developing": [
    //     "JOIN THE SOCIAL NETWORK FOR GAME DEVELOPING\n https://ATG.world/go/Game%20Developing ."
    // ],
    // "Internet Of Things": [
    //     "JOIN THE SOCIAL NETWORK FOR INTERNET OF THINGS\n https://ATG.world/go/Internet%20Of%20Things ."
    // ],
    // "Aeronautical Engineering": [
    //     "JOIN THE SOCIAL NETWORK FOR AERONAUTICAL ENGINEERING\n https://ATG.world/go/Aeronautical%20Engineering ."
    // ],
    // "Chemical Engineering": [
    //     "JOIN THE SOCIAL NETWORK FOR CHEMICAL ENGINEERING\n https://ATG.world/go/Chemical%20Engineering ."
    // ],
    // "Fashion": [
    //     "JOIN THE SOCIAL NETWORK FOR FASHION\n https://ATG.world/go/Fashion ."
    // ],
    // "Flight Attendant": [
    //     "JOIN THE SOCIAL NETWORK FOR FLIGHT ATTENDANT\n https://ATG.world/go/Flight%20Attendant ."
    // ],
    // "Pilot": [
    //     "JOIN THE SOCIAL NETWORK FOR PILOT\n https://ATG.world/go/Pilot ."
    // ],
    // "Robotic Engineering": [
    //     "JOIN THE SOCIAL NETWORK FOR ROBOTIC ENGINEERING\n https://ATG.world/go/Robotic%20Engineering ."
    // ],
    // "Poetry": [
    //     "JOIN THE SOCIAL NETWORK FOR POETRY\n https://ATG.world/go/Poetry ."
    // ],
    // "Philosophy": [
    //     "JOIN THE SOCIAL NETWORK FOR PHILOSOPHY\n https://ATG.world/go/Philosophy ."
    // ],
    // "Architecture": [
    //     "JOIN THE SOCIAL NETWORK FOR ARCHITECTURE\n https://ATG.world/go/Architecture ."
    // ],
    // "Rowing": [
    //     "JOIN THE SOCIAL NETWORK FOR ROWING\n https://ATG.world/go/Rowing ."
    // ],
    // "Virtual Reality": [
    //     "JOIN THE SOCIAL NETWORK FOR VIRTUAL REALITY\n https://ATG.world/go/Virtual%20Reality ."
    // ],
    // "Biochemistry": [
    //     "JOIN THE SOCIAL NETWORK FOR BIOCHEMISTRY\n https://ATG.world/go/Biochemistry ."
    // ],
    // "Religion": [
    //     "JOIN THE SOCIAL NETWORK FOR RELIGION\n https://ATG.world/go/Religion ."
    // ],
    // "Spirituality": [
    //     "JOIN THE SOCIAL NETWORK FOR SPIRITUALITY\n https://ATG.world/go/Spirituality ."
    // ],
    // "Agriculture": [
    //     "JOIN THE SOCIAL NETWORK FOR AGRICULTURE\n https://ATG.world/go/Agriculture ."
    // ],
    // "Book Reading": [
    //     "JOIN THE SOCIAL NETWORK FOR BOOK READING\n https://ATG.world/go/Book%20Reading ."
    // ],
    // "History": [
    //     "JOIN THE SOCIAL NETWORK FOR HISTORY\n https://ATG.world/go/History ."
    // ],
    // "Space": [
    //     "JOIN THE SOCIAL NETWORK FOR SPACE\n https://ATG.world/go/Space ."
    // ],
    // "Pharmacy": [
    //     "JOIN THE SOCIAL NETWORK FOR PHARMACY\n https://ATG.world/go/Pharmacy ."
    // ],
    // "Education": [
    //     "JOIN THE SOCIAL NETWORK FOR EDUCATION\n https://ATG.world/go/Education ."
    // ],
    // "Entrance Exam": [
    //     "JOIN THE SOCIAL NETWORK FOR ENTRANCE EXAM\n https://ATG.world/go/Entrance%20Exam ."
    // ],
    // "Musical Instrument": [
    //     "JOIN THE SOCIAL NETWORK FOR MUSICAL INSTRUMENT\n https://ATG.world/go/Musical%20Instrument ."
    // ],
    // "Lifestyle": [
    //     "JOIN THE SOCIAL NETWORK FOR LIFESTYLE\n https://ATG.world/go/Lifestyle ."
    // ],
    // "Maths": [
    //     "JOIN THE SOCIAL NETWORK FOR MATHS\n https://ATG.world/go/Maths ."
    // ],
    // "French Language": [
    //     "JOIN THE SOCIAL NETWORK FOR FRENCH LANGUAGE\n https://ATG.world/go/French%20Language ."
    // ],
    // "Student": [
    //     "JOIN THE SOCIAL NETWORK FOR STUDENT\n https://ATG.world/go/Student ."
    // ],
    // "Chess": [
    //     "JOIN THE SOCIAL NETWORK FOR CHESS\n https://ATG.world/go/Chess ."
    // ],
    // "Guitar": [
    //     "JOIN THE SOCIAL NETWORK FOR GUITAR\n https://ATG.world/go/Guitar ."
    // ],
    // "Tabla": [
    //     "JOIN THE SOCIAL NETWORK FOR TABLA\n https://ATG.world/go/Tabla ."
    // ],
    // "Piano": [
    //     "JOIN THE SOCIAL NETWORK FOR PIANO\n https://ATG.world/go/Piano ."
    // ],
    // "Violin": [
    //     "JOIN THE SOCIAL NETWORK FOR VIOLIN\n https://ATG.world/go/Violin ."
    // ],
    // "Flute": [
    //     "JOIN THE SOCIAL NETWORK FOR FLUTE\n https://ATG.world/go/Flute ."
    // ],
    // "Drum": [
    //     "JOIN THE SOCIAL NETWORK FOR DRUM\n https://ATG.world/go/Drum ."
    // ],
    // "Saxophone": [
    //     "JOIN THE SOCIAL NETWORK FOR SAXOPHONE\n https://ATG.world/go/Saxophone ."
    // ],
    // "Cello": [
    //     "JOIN THE SOCIAL NETWORK FOR CELLO\n https://ATG.world/go/Cello ."
    // ],
    // "Keyboard": [
    //     "JOIN THE SOCIAL NETWORK FOR KEYBOARD\n https://ATG.world/go/Keyboard ."
    // ],
    // "Harmonium": [
    //     "JOIN THE SOCIAL NETWORK FOR HARMONIUM\n https://ATG.world/go/Harmonium ."
    // ],
    // "Mythology": [
    //     "JOIN THE SOCIAL NETWORK FOR MYTHOLOGY\n https://ATG.world/go/Mythology ."
    // ],
    // "Market Analysis": [
    //     "JOIN THE SOCIAL NETWORK FOR MARKET ANALYSIS\n https://ATG.world/go/Market%20Analysis ."
    // ],
    // "LGBT": [
    //     "JOIN THE SOCIAL NETWORK FOR LGBT\n https://ATG.world/go/LGBT ."
    // ],
    // "Class 11": [
    //     "JOIN THE SOCIAL NETWORK FOR CLASS 11\n https://ATG.world/go/Class%2011 ."
    // ],
    // "Class 10": [
    //     "JOIN THE SOCIAL NETWORK FOR CLASS 10\n https://ATG.world/go/Class%2010 ."
    // ],
    // "Class 12": [
    //     "JOIN THE SOCIAL NETWORK FOR CLASS 12\n https://ATG.world/go/Class%2012 ."
    // ],
    // "Teacher": [
    //     "JOIN THE SOCIAL NETWORK FOR TEACHER\n https://ATG.world/go/Teacher ."
    // ],
    // "Festival": [
    //     "JOIN THE SOCIAL NETWORK FOR FESTIVAL\n https://ATG.world/go/Festival ."
    // ],
    // "Beauty": [
    //     "JOIN THE SOCIAL NETWORK FOR BEAUTY\n https://ATG.world/go/Beauty ."
    //  ]
    // "IIT JEE": [
    //     "JOIN THE SOCIAL NETWORK FOR IIT JEE\n https://ATG.world/go/IIT%20JEE ."
    // ],
    // "Archaeology": [
    //     "JOIN THE SOCIAL NETWORK FOR ARCHAEOLOGY\n https://ATG.world/go/Archaeology ."
    // ],
    // "Civilisation": [
    //     "JOIN THE SOCIAL NETWORK FOR CIVILISATION\n https://ATG.world/go/Civilisation ."
    // ],
    // "Astronomy": [
    //     "JOIN THE SOCIAL NETWORK FOR ASTRONOMY\n https://ATG.world/go/Astronomy ."
    // ],
    // "Cooking": [
    //     "JOIN THE SOCIAL NETWORK FOR COOKING\n https://ATG.world/go/Cooking ."
    // ],
    // "Trading": [
    //     "JOIN THE SOCIAL NETWORK FOR TRADING\n https://ATG.world/go/Trading ."
    // ],
    // "Movie Watching": [
    //     "JOIN THE SOCIAL NETWORK FOR MOVIE WATCHING\n https://ATG.world/go/Movie%20Watching ."
    // ],
    // "Archery": [
    //     "JOIN THE SOCIAL NETWORK FOR ARCHERY\n https://ATG.world/go/Archery ."
    // ],
    // "Bowling": [
    //     "JOIN THE SOCIAL NETWORK FOR BOWLING\n https://ATG.world/go/Bowling ."
    // ],
    // "Karate": [
    //     "JOIN THE SOCIAL NETWORK FOR KARATE\n https://ATG.world/go/Karate ."
    // ],
    // "Weight Lifting": [
    //     "JOIN THE SOCIAL NETWORK FOR WEIGHT LIFTING\n https://ATG.world/go/Weight%20Lifting ."
    // ],
    // "Shooting": [
    //     "JOIN THE SOCIAL NETWORK FOR SHOOTING\n https://ATG.world/go/Shooting ."
    // ],
    // "Ballet": [
    //     "JOIN THE SOCIAL NETWORK FOR BALLET\n https://ATG.world/go/Ballet ."
    // ],
    // "Kathak": [
    //     "JOIN THE SOCIAL NETWORK FOR KATHAK\n https://ATG.world/go/Kathak ."
    // ],
    // "Magic": [
    //     "JOIN THE SOCIAL NETWORK FOR MAGIC\n https://ATG.world/go/Magic ."
    // ],
    // "Horse Riding": [
    //     "JOIN THE SOCIAL NETWORK FOR HORSE RIDING\n https://ATG.world/go/Horse%20Riding ."
    // ],
    // "Self Defence": [
    //     "JOIN THE SOCIAL NETWORK FOR SELF DEFENCE\n https://ATG.world/go/Self%20Defence ."
    // ],
    // "Swimming": [
    //     "JOIN THE SOCIAL NETWORK FOR SWIMMING\n https://ATG.world/go/Swimming ."
    // ]
}
keywords = [];
var group_post,group_scrape,gmail_work,page_scrape;
var groups = shuffle(Object.keys(data))
var grpToken = groups[0];
var fb_groups_s_url_list = [];
var fb_group_s_loop_count = -1;
var fb_cat_groups_loop_count = -1;
var group_arr = [];
var group_len;
var fb_cat_wise_group_count = -1;
var first_run = true;
var global_phone_arr = {};
var global_email_arr = {};
var global_email_arr_loop_count = -1;
var global_email_arr_len;
var email_return_arr = [];
var phone_return_arr = [];
var url_return_arr = [];

var fb_page_s_url_list = [];
var fb_page_s_loop_count = -1;

var fb_page_url_list = [];
var fb_page_loop_count = 0;
var fb_page_last_loaded;
var testvar = 0;
var testvar2 = 0;
var location_var;
function dump_to_db(email_flag, phone_flag, val,key) {
    if (key == "page") 
    {if (fb_page_s_loop_count <= groups.length - 1)
        var catName = groups[fb_page_s_loop_count];
    else
        var catName = keywords[fb_page_s_loop_count - groups.length];
    }
    if(key == "group")var catName = groups[fb_cat_groups_loop_count];
    if (email_flag) {
        var addon = '&email=';
        if(global_email_arr[catName])
        global_email_arr[catName].push(...val);        
        else
        global_email_arr[catName]=val; 
    }
    if (phone_flag) {
        var addon = '&phone=';
        if (global_phone_arr[catName])
            global_phone_arr[catName].push(...val);
        else
            global_phone_arr[catName] = val;
    }
    console.log(addon + val);

    console.log('DUMP TO DB URL' + 'http://atg-test.000webhostapp.com/api/submit?group_name=' + catName + addon + val + '&location=' + location_var + '&url=fb_url');
    $.ajax({
        url: 'http://atg-test.000webhostapp.com/api/submit?group_name=' + catName + addon + val + '&location=' + location_var + '&url=fb_url',
        contentType: "json",
        method: "post",
        crossDomain: true,
        success: function (response) {
            console.log('data submitted online');
            console.log(response);
        }
    });
}
function load_groups_for_check(){
fb_cat_wise_group_count++;
    console.log(fb_cat_wise_group_count +"/"+ (group_len-1))
    chrome.tabs.query({ active: true, currentWindow: true }, function (tabs) {
        console.log('navigng to : ' + group_arr[fb_cat_wise_group_count]);
        activeTab = tabs[0].id;
        chrome.tabs.update(tabs[0].id, { url: group_arr[fb_cat_wise_group_count] }, () => {
            chrome.tabs.onUpdated.addListener(function lak(tabid, changedInfo) {
                //dont load any images
                chrome.contentSettings['images'].get({
                    primaryUrl: tabs[0].url
                }, function (details) {
                    chrome.contentSettings['images'].set({
                        primaryPattern: 'https://www.facebook.com/*',
                        secondaryPattern: 'https://www.facebook.com/*',
                        setting: 'block'
                    })
                })
                //listener for when loading is complete
                if (changedInfo.status === "complete" && tabid == activeTab) {
                    console.log("sending message that group_page_loaded");
                    chrome.tabs.sendMessage(tabs[0].id, { 
                        greeting: "fb_group_page_loaded",
                        keyword: grpToken,
                        array: data[grpToken],
                        scraping:group_scrape,
                        posting:group_post,
                        tabid: activeTab }, function (response) {
                        while (chrome.tabs.onUpdated.hasListener(lak) === true) {
                            chrome.tabs.onUpdated.removeListener(lak);
                        }
                    })
                }

            })    
        })
    })
}
function revisit_group_category_wise_for_approval(){
//fb_cat_groups_loop_count++;
chrome.storage.sync.get(grpToken,(res)=>{
    //for(each group link)
    console.log(res);
    group_arr = res[grpToken];
    group_len = res[grpToken].length;
    fb_cat_wise_group_count = -1;
    load_groups_for_check();
})
}
function store_in_local_storage(key,arr){
    console.log({ [key]: arr });
    chrome.storage.sync.set({[key]:arr},()=>{
        console.log("stored the links in local storage");
    });
}
function generate_fb_page_search_links(txtt) {
    fb_page_s_url_list.push('https://www.facebook.com/search/pages/?q=' + txtt + '%20' + location_var + '&epa=SEARCH_BOX');
}
function load_fb_search_page_by_input() {
    try {
        //if (!navigator.onLine) throw "paused";
        //var completed = document.getElementById("percentCompleted");
        fb_page_s_loop_count++;
        //completed.innerHTML = "finished:" + parseFloat((fb_page_s_loop_count / fb_page_s_url_list.length) * 100).toFixed(2) + "%" + "(" + fb_page_s_loop_count + "/" + fb_page_s_url_list.length + ")";
        console.log('inside call urls : ' + fb_page_s_loop_count);
        chrome.tabs.query({ active: true, currentWindow: true }, function (tabs) {
            console.log('navigng to : ' + fb_page_s_url_list[fb_page_s_loop_count]);
            activeTab = tabs[0].id;
            chrome.tabs.update(tabs[0].id, { url: fb_page_s_url_list[fb_page_s_loop_count] }, () => {
                chrome.tabs.onUpdated.addListener(function lakshadweep(tabid, changedInfo) {
                    //dont load any images
                    chrome.contentSettings['images'].get({
                        primaryUrl: tabs[0].url
                    }, function (details) {
                        chrome.contentSettings['images'].set({
                            primaryPattern: 'https://www.facebook.com/*',
                            secondaryPattern: 'https://www.facebook.com/*',
                            setting: 'block'
                        })
                    })
                    //listener for when loading is complete
                    if (changedInfo.status === "complete" && tabid == activeTab) {
                        console.log("sending message that fb_s_page_loaded");
                        chrome.tabs.sendMessage(tabs[0].id, { greeting: "fb_search_page_loaded", keyword: groups[fb_page_s_loop_count], tabid: activeTab }, function () {
                            while (chrome.tabs.onUpdated.hasListener(lakshadweep) === true) {
                                chrome.tabs.onUpdated.removeListener(lakshadweep);
                            }
                            // fb_page_s_url_list.push(response.url_loaded_response);
                        });
                    }
                });
            });
        })
        console.log(global_email_arr, global_phone_arr);
    }
    catch (err) {
        console.log(err, ":cant load fb search page");
        console.log("no internet connectivity.")
        //pause();
    }
}
function load_fb_page() {
    try {
        if (!navigator.onLine) throw "paused";
        console.log("testvar2 : ", testvar2);
        chrome.tabs.query({ active: true, currentWindow: true }, function (tabs) {
            console.log('navigating to page : ' + fb_page_url_list[fb_page_loop_count]);
            chrome.tabs.update(tabs[0].id, { url: fb_page_url_list[fb_page_loop_count] }, () => {
                console.log('inside UPDATE');

                chrome.tabs.onUpdated.addListener(function kovalam(tabid, changedInfo, tab) {
                    console.log('inside ADD LISTENER');
                    //dont load any images
                    chrome.contentSettings['images'].get({
                        primaryUrl: tabs[0].url
                    }, function (details) {
                        chrome.contentSettings['images'].set({
                            primaryPattern: 'https://www.facebook.com/*',
                            secondaryPattern: 'https://www.facebook.com/*',
                            setting: 'block'
                        })
                    })

                    if (changedInfo.status == 'complete' && tab.status == 'complete' && tabid == activeTab) {
                        if (new Date() - fb_page_last_loaded <= 5000) {
                            console.log('we avoided duplicate changedInfo.status = complete');
                        } else {
                            console.log('===== TAB LOAD COMPLETED ===============');
                            chrome.tabs.sendMessage(tabs[0].id, { greeting: "fb_page_loaded", tabid: activeTab }, function (response) {
                                console.log('FACEBOOK PAGE hAS LOADED');
                                // console.log(fb_page_url_list);
                                console.log(fb_page_loop_count + '/' + fb_page_url_list.length);
                                console.log(fb_page_url_list[fb_page_loop_count]);
                                fb_page_loop_count++;
                                // debugger;
                                while (chrome.tabs.onUpdated.hasListener(kovalam) === true) {
                                    chrome.tabs.onUpdated.removeListener(kovalam);
                                }
                            });
                        }
                    }
                    //listener for when loading is complete
                });
            });
        });
    }
    catch (err) {
        console.log(err, "can't load fb page");
        console.log("no internet connectivity.");
        //pause();
    } 

}
// function send_Email(email_arr) {
//     global_email_arr_loop_count++;
//     chrome.tabs.query({ active: true, currentWindow: true }, function (tabs) {
//         console.log("navigating to https://mail.google.com/mail/u/0/#starred?compose=new");
//         chrome.tabs.update(tabs[0].id, { url: "https://rebrand.ly/9175f" }, () => {
//             activeTab = tabs[0].id;
//             chrome.tabs.onUpdated.addListener(function kovalam(tabid, changedInfo, tab) {
//                 if (changedInfo.status == 'complete' && tab.status == 'complete' && tabid == activeTab) {
//                     chrome.tabs.sendMessage(tabs[0].id, 
//                     {
//                         greeting: "send_email",
//                         emailArr: { [Object.keys(email_arr)[global_email_arr_loop_count]]:email_arr[Object.keys(email_arr)[global_email_arr_loop_count]]} 
//                     }, function (response) {
//                         while (chrome.tabs.onUpdated.hasListener(kovalam) === true) {
//                             chrome.tabs.onUpdated.removeListener(kovalam);
//                         }
//                         console.log("page_loaded and information sent");
//                     })
//                 }
//             })
//         })
//     })
// }
function main_fx_backend(request, sender, sendResponse) {
    if ('fb_group_search_page_loaded_response' in request){
        //store in local storage
        store_in_local_storage(request.keyword, request.fb_group_search_page_loaded_response);
        //if fb_groups_s_loop_count < url_list .length
        console.log(fb_group_s_loop_count + "/" + (fb_groups_s_url_list.length - 1));
        if (page_scrape && first_run) {
            for (var loop_count = 0; loop_count < groups.length; loop_count++) {
                generate_fb_page_search_links(groups[loop_count]);
            }
            for (var loop_count = 0; loop_count < keywords.length; loop_count++) {
                generate_fb_page_search_links(keywords[loop_count]);
            }
            load_fb_search_page_by_input();
        }
        else console.log("over");
        }
    if ('fb_group_page_loaded_response' in request){
        //agar group list remains 
        if(request.emailMatches.length>0) email_return_arr.push(...request.emailMatches)
        if (request.phoneMatches.length > 0) phone_return_arr.push(...request.phoneMatches)
        if (request.urlMatches.length > 0) url_return_arr.push(...request.urlMatches);
        if (fb_cat_wise_group_count<group_len-1 ) 
        //next group in the list
        load_groups_for_check();
        else{
            if (email_return_arr.length > 0) { dump_to_db(1, 0, email_return_arr, "group"); email_return_arr = []; }
            if (phone_return_arr.length > 0) { dump_to_db(0, 1, phone_return_arr, "group"); phone_return_arr = []; }
             //start pages
            if(page_scrape && !first_run){
                for (var loop_count = 0; loop_count < groups.length; loop_count++) {
                    generate_fb_page_search_links(groups[loop_count]);
                }
                for (var loop_count = 0; loop_count < keywords.length; loop_count++) {
                    generate_fb_page_search_links(keywords[loop_count]);
                }
                load_fb_search_page_by_input();
            }
            else console.log("over");
            
        } 
        //console.log("Over");
        
    }
    if ('fb_search_page_loaded_response' in request) {
        console.log('FACEBOOK PAGE search HAS loaded');
        console.log(request.fb_search_page_loaded_response);

        fb_page_url_list = request.fb_search_page_loaded_response;


        // JUNK CODE THAT REDUCES LENGHT OF ARRAY -- TO BE DELETED
        // fb_page_url_list.length = 5;

        console.log('request.fb_search_page_loaded_response;' + fb_page_url_list.length);

        fb_page_loop_count = 0;
        var something = (function () {
            var executed = false;
            return function () {
                if (!executed) {
                    executed = true;
                    testvar++;
                    console.log("inside do something");
                    load_fb_page();
                    testvar2++;
                }
            };
        })();
        something(); // "do something" happens
        something(); // nothing happens
    }
    if ('fb_page_loaded_response' in request) {

        console.log('FACEBOOK PAGE HAS RETURNED THE DATA NOW!!!! EMAIL + PHONE + URL DATA IS RECEIVED!! ');
        if (request.email.length === 0) {
            console.log('email is null');
        } else {
            email_return_arr.push(...request.email);
            console.log('email is NOT null');
        }

        if (request.phone.length === 0) {
            console.log('phone is null');
        } else {
            phone_return_arr.push(...request.phone);
            console.log('phone is NOT null');
        }

        if (request.url.length === 0) {
            console.log('url is null');
        } else {
            console.log('url is NOT null');
            url_return_arr.push(...request.url);
            console.log(url_return_arr);
        }
        if (fb_page_loop_count < fb_page_url_list.length) {
            console.log('calling load_fb_page from inside fb_page_loaded_response with a setTimeout of 12000.. so it should run in 12 seconds');
            fb_page_last_loaded = new Date();
            setTimeout(load_fb_page, 12000);
        } else {
            if (fb_page_loop_count == fb_page_url_list.length ) {
                console.log(fb_page_loop_count);
                console.log(fb_page_url_list);
                if (email_return_arr.length > 0) {
                    dump_to_db(1, 0, email_return_arr,"page");
                    email_return_arr = [];
                }

                if (phone_return_arr.length > 0) {
                    dump_to_db(0, 1, phone_return_arr,"page");
                    phone_return_arr = [];
                }
                console.log('WELL, last PAGE in the fb_page_url_list has finished. Now we should call call_url again to go to the next group ');
                // TODO : this is where we will dump all the email / phone number for this location/group combo to the DB server.
                if (fb_page_s_loop_count <= groups.length - 1)
                    var keyi = groups[fb_page_s_loop_count];
                else
                    var keyi = keywords[fb_page_s_loop_count - groups.length];
                console.log({ [keyi]: url_return_arr });
                chrome.storage.sync.set({ [keyi]: url_return_arr }, () => {
                    console.log("inside");
                    url_return_arr = [];
                    chrome.storage.sync.get([keyi], (res) => {
                        console.log(res);
                    })
                    if (fb_page_s_loop_count < fb_page_s_url_list.length - 1) load_fb_search_page_by_input();
                    else {
                        // global_email_arr_len = Object.keys(global_email_arr).length;
                        // send_Email(global_email_arr);
                        revisit_group_category_wise_for_approval();
                    }
                })

            }
        }
    }
    // if ('send_email_response' in request) {
    //     console.log(global_email_arr_loop_count + "/" + (global_email_arr_len - 1))
    //     if (global_email_arr_loop_count < global_email_arr_len - 1)
    //         send_Email(global_email_arr);
    //     else console.log("email_Over");
    // }
}

if (!chrome.runtime.onMessage.hasListener(main_fx_backend)) {
    chrome.runtime.onMessage.addListener(main_fx_backend);
}

function load_fb_groups_search_page(){
//go to the link
    console.log(grpToken);
fb_group_s_loop_count++;
    chrome.tabs.query({ active: true, currentWindow: true }, function (tabs) {
        console.log('navigng to : ' + fb_groups_s_url_list[fb_group_s_loop_count]);
        activeTab = tabs[0].id;
        chrome.tabs.update(tabs[0].id, { url: fb_groups_s_url_list[fb_group_s_loop_count] }, () => {
            chrome.tabs.onUpdated.addListener(function lakshadweep(tabid, changedInfo) {
                //dont load any images
                chrome.contentSettings['images'].get({
                    primaryUrl: tabs[0].url
                }, function (details) {
                    chrome.contentSettings['images'].set({
                        primaryPattern: 'https://www.facebook.com/*',
                        secondaryPattern: 'https://www.facebook.com/*',
                        setting: 'block'
                    })
                })
                //listener for when loading is complete
                if (changedInfo.status === "complete" && tabid == activeTab) {
                    console.log("sending message that fb_s_page_loaded");
                    chrome.tabs.sendMessage(tabs[0].id, {
                        greeting: "fb_group_search_page_loaded",
                        keyword: grpToken,
                        tabid: activeTab }, function () {
                        while (chrome.tabs.onUpdated.hasListener(lakshadweep) === true) {
                            chrome.tabs.onUpdated.removeListener(lakshadweep);
                        }
                    })
                }
            })
        })
    })
}
function generate_fb_group_search_links(key){
    fb_groups_s_url_list.push(`https://www.facebook.com/search/groups/?q=${key}`)
}
// function check_if_first_run(){
    
//     chrome.storage.sync.get("new",(res)=>{
//         if (res["new"] == undefined) {
//             first_run = true;
//             chrome.storage.sync.set({ "new": "false" });
//         }
//     });
// }
function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
        let j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}
function main(){
    console.log("mian starts");
    group_post = document.getElementById("group_post").checked;
    group_scrape = document.getElementById("group_scrape").checked;
    page_scrape = document.getElementById("page_scrape").checked;
    // gmail_work = document.getElementById("gmail_work").checked;
    // console.log(group_post, group_scrape, page_scrape, gmail_work)
     location_var = $('input#location').val();
     if(group_post || group_scrape){
        //for (var loop_count = 0; loop_count < groups.length; loop_count++)
            generate_fb_group_search_links(grpToken);
        console.log(fb_groups_s_url_list);
        chrome.storage.sync.get(grpToken, (res) => {
            if (res[grpToken] == undefined) {
                load_fb_groups_search_page()
            }
            else{
                first_run =false;
                revisit_group_category_wise_for_approval()
            } 
            //modify revist fn toh check for both scrape and post
        });
    }
     else if (page_scrape) {
         for (var loop_count = 0; loop_count < groups.length; loop_count++) {
             generate_fb_page_search_links(groups[loop_count]);
         }
         for (var loop_count = 0; loop_count < keywords.length; loop_count++) {
             generate_fb_page_search_links(keywords[loop_count]);
         }
         load_fb_search_page_by_input();
     }
     else alert("select atleast one of the boxes");
    
    
 }
(function () {
    document.addEventListener('DOMContentLoaded', function () {     
        document.querySelector('#submit').addEventListener(
            'click', main);
    });
})();